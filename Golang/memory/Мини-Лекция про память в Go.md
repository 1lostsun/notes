## Архитектура памяти : 

### Го запрашивает кусок (Arena) виртуальной памяти и сам ей руководит. 

### Arena - крупнейшая единица памяти. Область фиксированного размера в 64 МБ (на не виндовсе и 64 битных системах, а на винде и 32 битках выделяется 4 МБ), выделенная из виртуальной памяти.

---
### После выделения памяти го делит каждую арену (он может их запрашивать по несколько штук) 
### на страницы по 8 КБ == 8192 байта (см mheap в исходниках). 

### Spans - одна или несколько смежных страниц. Каждый span хранит в себе объекты только одного размера. ([mspan](Allocation#mspan), см  в mheap строка 402 struct mspan) 

### Всего существует 67 классов размеров span для объектов менее 32 кб (они считаются объектами малых размеров выделений).

---

### Трехуровневая [аллокация](Allocation): 

```go
1: mcache            2: mcentral          3: mheap
|---------------|    |---------------|    |---------------|
|               |    |               |    |               |
|Локальный кэш  |    |Управляет spans|    |Глобальный     |
|процессора для |    |для каждого    |    |аллокатор.     |
|быстрых        | -> |класса размера | -> |Выделяет spans |
|аллокаций без  |    |и пополняет    |    |и запрашивает  |
|блокировок.    |    |mcache.        |    |память у ОС.   |
|               |    |               |    |               |                                
|---------------|    |---------------|    |---------------|
```

---

### Стек : Быстрое выделение для локальных данных. Очищается при выходе из функции.
### Куча : Медленнее. Для данных, которые "ускользают". Требует сборки мусора (Garbage collecting) для очистки.

---
